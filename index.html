<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' id='app'  href='app.css?version=2.1' type='text/css' media='all' />
    <link rel='stylesheet' id='toastr'  href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css' type='text/css' media='all' />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.25.0/axios.min.js" integrity="sha512-/Q6t3CASm04EliI1QyIDAA/nDo9R8FQ/BULoUFyN4n/BDdyIxeH7u++Z+eobdmr11gG5D/6nPFyDlnisDwhpYA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <title>Aleexgod Twitch Overlay</title>
  </head>
  <body>
  
    <div id="peeporun"></div>
    <div id="banned"><div class="text"></div></div>
    <div id="controller"><div class="text">Skilled BTW</div> </div>

	<script>

		const chatbox = document.querySelector('#chatbox');

    ComfyJS.onCommand = ( user, command, message, flags, extra ) => {
        if( flags.broadcaster && command === "green" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_green/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed green');
            });
        } else if( flags.broadcaster && command === "purple" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_purple/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to purple');
            });
        }
        else if(command === "run") {
          $('#peeporun').addClass('running');
          setTimeout(function() {
            $('#peeporun').removeClass('running')
          }, 5000);
        }
        else if(command === "controller") {
          controller();
        }
    }

    function bannedUserAnim(bannedUsername) {
      $('#banned').addClass('active');
      setTimeout(function() {
        $('#banned .text').text(bannedUsername);
      }, 2500);
      setTimeout(function() {
        $('#banned').removeClass('active');
        $('#banned .text').text('');
      }, 4080);
    };


    function controller() {
      $('#controller').fadein(300);
      setTimeout(function() {
        $('#controller').fadeout();
      }, 4070);
    }



    ComfyJS.onBan = ( bannedUsername, extra ) => {
        bannedUserAnim(bannedUsername);
    }



    
    // ComfyJS.onChat = ( user, message, flags, self, extra ) => {
    //     toastr.info("<strong>" + user + "</strong>" + " " + message);
    //   }

    

    // ComfyJS.onReward = ( user, reward, cost, message, extra ) => {
    //   console.log( user + " redeemed " + reward + " for " + cost );
    //   if(reward === "509f762d-eb44-49f8-bb68-38c519007d11") {
    //     console.log('hood oos called');
    //   }
    // }
    // ComfyJS.Init( 'aleexgigachad', 'oauth:et50pakjciffdxh4wdd5s7s2fakw01' );
    
		ComfyJS.Init('aleexgod');
	</script>
  </body>
</html>