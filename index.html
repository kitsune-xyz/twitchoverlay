<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' id='app'  href='app.css?version=2.2' type='text/css' media='all' />
    <link rel='stylesheet' id='toastr'  href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css' type='text/css' media='all' />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.25.0/axios.min.js" integrity="sha512-/Q6t3CASm04EliI1QyIDAA/nDo9R8FQ/BULoUFyN4n/BDdyIxeH7u++Z+eobdmr11gG5D/6nPFyDlnisDwhpYA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <title>Aleexgod Twitch Overlay</title>
  </head>
  <body>
  
    <div id="salami"></div>
    <div id="peeporun"></div>
    <div id="banned"><div class="text"></div></div>
    <div id="controller"><div class="text">Skilled BTW</div> </div>
    <div id="confetti" class="wrapper">
      <div class="confetti-149"></div>
      <div class="confetti-148"></div>
      <div class="confetti-147"></div>
      <div class="confetti-146"></div>
      <div class="confetti-145"></div>
      <div class="confetti-144"></div>
      <div class="confetti-143"></div>
      <div class="confetti-142"></div>
      <div class="confetti-141"></div>
      <div class="confetti-140"></div>
      <div class="confetti-139"></div>
      <div class="confetti-138"></div>
      <div class="confetti-137"></div>
      <div class="confetti-136"></div>
      <div class="confetti-135"></div>
      <div class="confetti-134"></div>
      <div class="confetti-133"></div>
      <div class="confetti-132"></div>
      <div class="confetti-131"></div>
      <div class="confetti-130"></div>
      <div class="confetti-129"></div>
      <div class="confetti-128"></div>
      <div class="confetti-127"></div>
      <div class="confetti-126"></div>
      <div class="confetti-125"></div>
      <div class="confetti-124"></div>
      <div class="confetti-123"></div>
      <div class="confetti-122"></div>
      <div class="confetti-121"></div>
      <div class="confetti-120"></div>
      <div class="confetti-119"></div>
      <div class="confetti-118"></div>
      <div class="confetti-117"></div>
      <div class="confetti-116"></div>
      <div class="confetti-115"></div>
      <div class="confetti-114"></div>
      <div class="confetti-113"></div>
      <div class="confetti-112"></div>
      <div class="confetti-111"></div>
      <div class="confetti-110"></div>
      <div class="confetti-109"></div>
      <div class="confetti-108"></div>
      <div class="confetti-107"></div>
      <div class="confetti-106"></div>
      <div class="confetti-105"></div>
      <div class="confetti-104"></div>
      <div class="confetti-103"></div>
      <div class="confetti-102"></div>
      <div class="confetti-101"></div>
      <div class="confetti-100"></div>
      <div class="confetti-99"></div>
      <div class="confetti-98"></div>
      <div class="confetti-97"></div>
      <div class="confetti-96"></div>
      <div class="confetti-95"></div>
      <div class="confetti-94"></div>
      <div class="confetti-93"></div>
      <div class="confetti-92"></div>
      <div class="confetti-91"></div>
      <div class="confetti-90"></div>
      <div class="confetti-89"></div>
      <div class="confetti-88"></div>
      <div class="confetti-87"></div>
      <div class="confetti-86"></div>
      <div class="confetti-85"></div>
      <div class="confetti-84"></div>
      <div class="confetti-83"></div>
      <div class="confetti-82"></div>
      <div class="confetti-81"></div>
      <div class="confetti-80"></div>
      <div class="confetti-79"></div>
      <div class="confetti-78"></div>
      <div class="confetti-77"></div>
      <div class="confetti-76"></div>
      <div class="confetti-75"></div>
      <div class="confetti-74"></div>
      <div class="confetti-73"></div>
      <div class="confetti-72"></div>
      <div class="confetti-71"></div>
      <div class="confetti-70"></div>
      <div class="confetti-69"></div>
      <div class="confetti-68"></div>
      <div class="confetti-67"></div>
      <div class="confetti-66"></div>
      <div class="confetti-65"></div>
      <div class="confetti-64"></div>
      <div class="confetti-63"></div>
      <div class="confetti-62"></div>
      <div class="confetti-61"></div>
      <div class="confetti-60"></div>
      <div class="confetti-59"></div>
      <div class="confetti-58"></div>
      <div class="confetti-57"></div>
      <div class="confetti-56"></div>
      <div class="confetti-55"></div>
      <div class="confetti-54"></div>
      <div class="confetti-53"></div>
      <div class="confetti-52"></div>
      <div class="confetti-51"></div>
      <div class="confetti-50"></div>
      <div class="confetti-49"></div>
      <div class="confetti-48"></div>
      <div class="confetti-47"></div>
      <div class="confetti-46"></div>
      <div class="confetti-45"></div>
      <div class="confetti-44"></div>
      <div class="confetti-43"></div>
      <div class="confetti-42"></div>
      <div class="confetti-41"></div>
      <div class="confetti-40"></div>
      <div class="confetti-39"></div>
      <div class="confetti-38"></div>
      <div class="confetti-37"></div>
      <div class="confetti-36"></div>
      <div class="confetti-35"></div>
      <div class="confetti-34"></div>
      <div class="confetti-33"></div>
      <div class="confetti-32"></div>
      <div class="confetti-31"></div>
      <div class="confetti-30"></div>
      <div class="confetti-29"></div>
      <div class="confetti-28"></div>
      <div class="confetti-27"></div>
      <div class="confetti-26"></div>
      <div class="confetti-25"></div>
      <div class="confetti-24"></div>
      <div class="confetti-23"></div>
      <div class="confetti-22"></div>
      <div class="confetti-21"></div>
      <div class="confetti-20"></div>
      <div class="confetti-19"></div>
      <div class="confetti-18"></div>
      <div class="confetti-17"></div>
      <div class="confetti-16"></div>
      <div class="confetti-15"></div>
      <div class="confetti-14"></div>
      <div class="confetti-13"></div>
      <div class="confetti-12"></div>
      <div class="confetti-11"></div>
      <div class="confetti-10"></div>
      <div class="confetti-9"></div>
      <div class="confetti-8"></div>
      <div class="confetti-7"></div>
      <div class="confetti-6"></div>
      <div class="confetti-5"></div>
      <div class="confetti-4"></div>
      <div class="confetti-3"></div>
      <div class="confetti-2"></div>
      <div class="confetti-1"></div>
      <div class="confetti-0"></div>
    </div>

    <video id="memevids" src=""></video>

  	<script>
 
		const chatbox = document.querySelector('#chatbox');
    var video = document.getElementById('memevids');
// 93cd8382-21a1-4cbd-a3bf-8dee10475431 <-- rewardid

    ComfyJS.onCommand = ( user, command, message, flags, extra ) => {
        if( flags.broadcaster && command === "green" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_green/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed green');
            });
        } else if( flags.broadcaster && command === "purple" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_purple/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to purple');
            });
        }
        else if(command === "run") {
          $('#peeporun').addClass('running');
          setTimeout(function() {
            $('#peeporun').removeClass('running')
          }, 5000);
        }
        else if(command === "controller") {
          controller();
        };

        if(command === "stfu") {
          $('#memevids').fadeIn(300);
          video.src = "./video/snoopstfubitch.mp4";
          video.play();
          video.volume = 0.6;
          setTimeout(function() {
            video.removeAttribute('src');
            $('#memevids').fadeOut();
          }, 2800);
        } else if(command === "dontcare") {
          $('#memevids').fadeIn(300);
          video.src = "./video/wedonotcare.mp4";
          video.volume = 0.8;
          video.play();
          setTimeout(function() {
            video.removeAttribute('src');
            $('#memevids').fadeOut();
          }, 4500);
        } else if(command === "true") {
          $('#memevids').fadeIn(300);
          video.src = "./video/true.mp4";
          video.volume = 0.6;
          video.play();
          setTimeout(function() {
            video.removeAttribute('src');
            $('#memevids').fadeOut();
          }, 7500);
        }

    }

    ComfyJS.onChat = ( user, message, flags, self, extra ) => {
      console.log( user, message.toLowerCase() );
      if( flags.customReward && extra.customRewardId === "93cd8382-21a1-4cbd-a3bf-8dee10475431" ) {
        if( message.toLowerCase() === "green") {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_green/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed green');
            });
        } else if ( message.toLowerCase() === "purple" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_purple/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to purple');
            });
        } else if ( message.toLowerCase() === "blue" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_blue/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to blue');
            });
        } else if ( message.toLowerCase() === "red" ) {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_red/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to red');
            });
        } else {
          fetch('https://gentle-eyrie-49527.herokuapp.com/maker.ifttt.com/trigger/change_blue/with/key/cvKnW3w0ovrX3aQLGqCmqr')
            .then((response) => {
              toastr.success('light changed to blue');
            });
        }
      }
    }



    function bannedUserAnim(bannedUsername) {
      $('#banned').addClass('active');
      setTimeout(function() {
        $('#banned .text').text(bannedUsername);
      }, 2500);
      setTimeout(function() {
        $('#banned').removeClass('active');
        $('#banned .text').text('');
      }, 4080);
    };


    function controller() {
      $('#controller').fadeIn(300);
      setTimeout(function() {
        $('#controller').fadeOut(200);
      }, 3870);
    }

    function confetti() {
      $('#confetti').fadeIn(300);
      setTimeout(function() {
        $('#confetti').fadeOut(200);
      }, 3870);
    }

    function salami() {
      $('#salami').addClass('up');
      $('#salami').fadeIn(300);
      setTimeout(function() {
        $('#salami').removeClass('up');
        $('#salami').fadeOut(200);
      }, 3870);
    }

    ComfyJS.onBan = ( bannedUsername, extra ) => {
        bannedUserAnim(bannedUsername);
    }

    ComfyJS.onSub = ( user, message, subTierInfo ) => {
        confetti();
    }

    ComfyJS.onResub = ( user, message, streamMonths, cumulativeMonths, subTierInfo ) => {
        confetti();
    }

    ComfyJS.onReward = ( user, reward, cost, message, extra ) => {
      console.log( user + " redeemed " + reward + " for " + cost );
    }    

    
    ComfyJS.Init( 'aleexgod', 'oauth:xlmpdwgcbdbiciupv0l721yo2z0747' );
		// ComfyJS.Init('wintrfox');
	</script>
  </body>
</html>